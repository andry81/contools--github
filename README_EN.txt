* README_EN.txt
* 2025.01.18
* contools--github

1. DESCRIPTION
2. LICENSE
3. REPOSITORIES
4. CATALOG CONTENT DESCRIPTION
5. USAGE
5.1. Generate config files
5.2. Edit generated config files
5.3. Run RestAPI JSON response backup scripts
5.4. Run repositories backup
5.5. Delete repositories
5.6. Run workflows enabler
5.7. Generate `repos.lst`, `repos-auth.lst` and `repos-forked.lst` config files
     from the latest backed up RestAPI JSON file using `accounts-user.lst`
     config file
5.8. Generate `repos-forked-parent.lst` config file from the latest backed up
     RestAPI JSON file using `repos-forked.lst` config file
5.9. Generate `workflows*.lst` config file from the all latest backed up
     RestAPI JSON files using `repos-auth-with-workflows.lst` and
     `repos-with-workflows.lst` config files
6. AUTHENTICATION
7. KNOWN ISSUES
7.1. The `backup_restapi_user_repos_list.bat` script does return incomplete
     RestAPI JSON response. Not all the public repositories is returned.
8. AUTHOR

-------------------------------------------------------------------------------
1. DESCRIPTION
-------------------------------------------------------------------------------
Github local scripts to:
* Backup RestAPI JSON responses.
* Backup bare or/and checkouted repositories.
* Backup forked and fork parent repositories.
* Delete repositories.
* Workflow enable.
* Generate config files from backed up RestAPI JSON files.

-------------------------------------------------------------------------------
2. LICENSE
-------------------------------------------------------------------------------
The MIT license (see included text file "license.txt" or
https://en.wikipedia.org/wiki/MIT_License)

-------------------------------------------------------------------------------
3. REPOSITORIES
-------------------------------------------------------------------------------
Primary:
  * https://github.com/andry81/contools--github/branches
    https://github.com/andry81/contools--github.git
First mirror:
  * https://sf.net/p/contools/contools--github/ci/master/tree
    https://git.code.sf.net/p/contools/contools--github
Second mirror:
  * https://gitlab.com/andry81/contools-github/-/branches
    https://gitlab.com/andry81/contools-github.git

-------------------------------------------------------------------------------
4. CATALOG CONTENT DESCRIPTION
-------------------------------------------------------------------------------

<root>
 |
 +- /`.log`
 |    #
 |    # Log files directory, where does store all log files from all scripts
 |    # including all nested projects.
 |
 +- /`_config`
 |    #
 |    # Directory with input configuration files.
 |
 +- /`_out`
 |  | #
 |  | # Output directory for all files.
 |  |
 |  +- /`config`
 |  |  | #
 |  |  | # Output directory for all configuration files.
 |  |  |
 |  |  +- /`contools--github`
 |  |     | #
 |  |     | # Output directory for the scripts configuration files.
 |  |     |
 |  |     +- /`gen`
 |  |     |   #
 |  |     |   # Subdirectory for the configuration files generated by
 |  |     |   # the `gen_*.bat` scripts.
 |  |     |
 |  |     +- `accounts-org.lst`
 |  |     |   #
 |  |     |   # User organization accounts.
 |  |     |
 |  |     +- `accounts-user.lst`
 |  |     |   #
 |  |     |   # User accounts.
 |  |     |
 |  |     +- `repos.lst`
 |  |     |   #
 |  |     |   # User repositories list.
 |  |     |
 |  |     +- `repos-auth.lst`
 |  |     |   #
 |  |     |   # Authenticated only user repositories list.
 |  |     |
 |  |     +- `repos-auth-with-workflows.lst`
 |  |     |   #
 |  |     |   # Authenticated only user repositories with workflows list.
 |  |     |
 |  |     +- `repos-forked.lst`
 |  |     |   #
 |  |     |   # User forked as child repositories list.
 |  |     |
 |  |     +- `repos-forked-parent.lst`
 |  |     |   #
 |  |     |   # User forked as parent repositories list.
 |  |     |
 |  |     +- `repos-to-delete.lst`
 |  |     |   #
 |  |     |   # User repositories to delete.
 |  |     |
 |  |     +- `repos-with-workflows.lst`
 |  |     |   #
 |  |     |   # User repositories with workflows list.
 |  |     |
 |  |     +- `workflows.lst`
 |  |     |   #
 |  |     |   # User workflows.
 |  |     |
 |  |     +- `workflows-inactive.lst`
 |  |     |   #
 |  |     |   # Inactive user workflows.
 |  |     |
 |  |     +- `config.0.vars`
 |  |     |   #
 |  |     |   # Scripts public environment variables.
 |  |     |
 |  |     +- `config.1.vars`
 |  |         #
 |  |         # Scripts private environment variables.
 |  |
 |  +- /`backup`
 |  |  | #
 |  |  | # Output directory for github repository backup files.
 |  |  |
 |  |  +- /`bare`
 |  |  |    #
 |  |  |    # Output directory for backup bare with or without checkout
 |  |  |    # repositories.
 |  |  |
 |  |  +- /`checkouted`
 |  |  |    #
 |  |  |    # Output directory for backup only checkouted repositories.
 |  |  |
 |  |  +- /`restapi`
 |  |       #
 |  |       # Output directory for backup RestAPI JSON responses.
 |  |
 |  +- /`workflow`
 |       #
 |       # Output directory for github repository workflow files.
 |
 +- `/scripts/*.bat`
     #
     # Scripts.

-------------------------------------------------------------------------------
5. USAGE
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
5.1. Generate config files
-------------------------------------------------------------------------------

Run:

  >
  __init__/__init__.bat

-------------------------------------------------------------------------------
5.2. Edit generated config files
-------------------------------------------------------------------------------

accounts-org.lst
accounts-user.lst
repos.lst
repos-auth.lst
repos-auth-with-workflows.lst
repos-forked.lst
repos-forked-parent.lst
repos-to-delete.lst
repos-with-workflows.lst
workflows.lst
workflows-inactive.lst
config.0.vars
config.1.vars

-------------------------------------------------------------------------------
5.3. Run RestAPI JSON response backup scripts
-------------------------------------------------------------------------------

To backup all RestAPI JSON responses for authenticated user plus accounts from
`accounts-user.lst`:

  >
  backup_restapi_all_user_repos_list.bat

To backup RestAPI JSON responses only for user organization accounts from
`accounts-org.lst`:

  >
  backup_restapi_all_org_repos_list.bat

To backup using previous 2 with `user repo info`, `stargazers`, `subscribers`,
`forks`, `releases` using `repos.lst` and/or `repos-forked.lst` and/or
`repos-forked-parent.lst`.

  >
  backup_restapi_all.bat

To backup all RestAPI JSON responses except repository list and repository fork
lists for user and organization accounts. Or the same as
`backup_restapi_all.bat` script but excluding first 2 scripts and, excluding
`repos-forked.lst` and `repos-forked-parent.lst` lists:

  >
  backup_restapi_all_exclude_repos_list.bat

NOTE:
  Running the `backup_restapi_all*.bat` script you may backup using the old
  repositories list instead of the latest one.
  To use the latest repositories list read the details below in the
  "Generate `repos.lst`, `repos-auth.lst` and `repos-forked.lst` config files
  from the latest backed up RestAPI JSON file using `accounts-user.lst` and
  `accounts-org.lst` config files" section.
  Then you can run `backup_restapi_all_exclude_repos_list.bat` script to avoid
  backup the repositories list twice.

-------------------------------------------------------------------------------
5.4. Run repositories backup
-------------------------------------------------------------------------------

To backup a single user repository:

  >
  backup_bare_*_repo.bat ...
  backup_bared_checkout_*_repo.bat ...
  backup_checkouted_*_repo.bat ...

To backup multiple user repositories:

  >
  backup_bare_all*_repos.bat ...
  backup_bared_checkout_all*_repos.bat ...
  backup_checkouted_all*_repos.bat ...

To backup only bare repositor(ies):

  >
  backup_bare_*.bat ...

To backup only recursively checkouted repositor(ies):

  >
  backup_checkouted_*.bat ...

To backup repositor(ies) as bare plus with recursed checkout:

  >
  backup_bared_checkout_*.bat ...

To backup a single only authenticated user repository:

  >
  backup_*_auth_repo.bat ...

To backup multiple user repositories from `repos.lst` and/or `repos-forked.lst`
and/or `repos-forked-parent.lst`:

  >
  backup_*_all_repos.bat ...

To backup multiple only authenticated user repositories from `repos-auth.lst`:

  >
  backup_*_all_auth_repos.bat ...

-------------------------------------------------------------------------------
5.5. Delete repositories
-------------------------------------------------------------------------------

To delete a single user repository:

  >
  delete_restapi_user_repo.bat ...

To delete multiple user repositories from `repos-to-delete.lst`:

  >
  delete_restapi_user_repos.bat ...

-------------------------------------------------------------------------------
5.6. Run workflows enabler
-------------------------------------------------------------------------------

To be able to enable multiple user repository workflow lists:

  1. Generate `workflows*.lst` config file (see below).

To enable a single user repository workflow:

  >
  enable_restapi_user_repo_workflow.bat ...

To enable multiple user repository workflow lists using `workflows.lst` config:

  >
  enable_restapi_workflows.bat ...

To enable multiple inactive user repository workflow lists using
`workflows-inactive.lst` config:

  >
  enable_restapi_inactive_workflows.bat ...

-------------------------------------------------------------------------------
5.7. Generate `repos.lst`, `repos-auth.lst` and `repos-forked.lst` config files
     from the latest backed up RestAPI JSON file using `accounts-user.lst` and
     `accounts-org.lst` config files
-------------------------------------------------------------------------------
To be able to backup multiple user repository lists and/or generate
`repos.lst`, `repos-auth.lst` and `repos-forked.lst` config files,
update these configuration files:

  * `accounts-user.lst`

To be able to backup multiple organization repository lists, update these
configuration files:

  * `accounts-org.lst`

To backup a single user repository list:

  >
  backup_restapi_user_repos_list.bat ...

To backup a single organization repository list:

  >
  backup_restapi_org_repos_list.bat ...

To backup multiple user repository lists:

  >
  backup_restapi_all_user_repos_list.bat

To backup multiple organization repository lists:

  >
  backup_restapi_all_org_repos_list.bat

To generate `repos.lst` and `repos-auth.lst` config files:

  >
  gen_repos_config_from_last_backup.bat ...

To generate `repos-forked.lst` config file:

  >
  gen_repos_forked_config_from_last_backup.bat ...

NOTE:
  The only authenticated user repository list is used because of the issue
  in the `KNOWN ISSUES` section:
  > The `backup_restapi_user_repos_list.bat` script does return incomplete
  > RestAPI JSON response. Not all the public repositories is returned.

NOTE:
  All the `gen_*.bat` scripts does output into `gen` subdirectory of the
  configuration files output directory. You must compare and merge the output
  with the respective initial configuration file manually.

-------------------------------------------------------------------------------
5.8. Generate `repos-forked-parent.lst` config file from the latest backed up
     RestAPI JSON file using `repos-forked.lst` config file
-------------------------------------------------------------------------------
To be able to generate `repos-forked-parent.lst` config file,
update these configuration files:

  * `repos-forked.lst`

To backup a single repository info:

  >
  backup_restapi_repo_info.bat ...

To backup multiple repository info of forked as child repositories:

  >
  backup_restapi_all_repo_forked_info_only.bat ...

To generate `repos-forked-parent.lst` config file:

  >
  gen_repos_forked_parent_config_from_last_backup.bat ...

NOTE:
  All the `gen_*.bat` scripts does output into `gen` subdirectory of the
  configuration files output directory. You must compare and merge the output
  with the respective initial configuration file manually.

-------------------------------------------------------------------------------
5.9. Generate `workflows*.lst` config file from the all latest backed up
     RestAPI JSON files using `repos-auth-with-workflows.lst` and
     `repos-with-workflows.lst` config files
-------------------------------------------------------------------------------
To be able to backup multiple user repository workflow lists, update these
configuration files:

  * `repos-auth-with-workflows.lst`
  * `repos-with-workflows.lst`

To backup a single user repository workflow list:

  >
  backup_restapi_repo_workflows_list.bat ...

To backup multiple user repository workflow lists:

  >
  backup_restapi_all_repo_workflows_list.bat

To generate `workflows.lst` config file:

  >
  gen_workflows_config_from_last_backup.bat ...

To generate `workflows-inactive.lst` config file:

  >
  gen_workflows_config_from_last_backup.bat -filter-inactive ...

NOTE:
  All the `gen_*.bat` scripts does output into `gen` subdirectory of the
  configuration files output directory. You must compare and merge the output
  with the respective initial configuration file manually.

-------------------------------------------------------------------------------
6. AUTHENTICATION
-------------------------------------------------------------------------------
Authentication is based on `GH_AUTH_USER`, `GH_AUTH_PASS` and `GH_AUTH_PASS_*`
variables. You must set them to use authentication, otherwise the RestAPI JSON
response may be truncated, incomplete or invalid.

-------------------------------------------------------------------------------
7. KNOWN ISSUES
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
7.1. The `backup_restapi_user_repos_list.bat` script does return incomplete
     RestAPI JSON response. Not all the public repositories is returned.
-------------------------------------------------------------------------------
For some not know reason the `https://api.github.com/users/USER/repos` url
does return an incomplete RestAPI JSON response even for the authenticated
user.

Solution:

Use the authenticated user request through the
`backup_restapi_auth_user_repos_list.bat` script. It does use authentication
and `https://api.github.com/user/repos` url as the RestAPI JSON request.

-------------------------------------------------------------------------------
8. AUTHOR
-------------------------------------------------------------------------------
Andrey Dibrov (andry at inbox dot ru)
